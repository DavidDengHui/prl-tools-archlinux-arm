# Parallels Tools for Arch Linux ARM

![About Arch Linux](https://img2.covear.top/2024-02-29-20240229214413.png "About Arch Linux")
![2024-03-12-20240312203239](https://img2.covear.top/2024-03-12-20240312203239.png "2024-03-12-20240312203239")
![2024-03-15-20240315110612](https://img2.covear.top/2024-03-15-20240315110612.png "2024-03-15-20240315110612")

<p style="text-align: center;color: gray;">è™šæ‹Ÿæœºç³»ç»Ÿä¿¡æ¯</p>

è¿™æ˜¯ä¸€ä¸ªä¸ºäº†é€‚é… `Arch Linux ARM` çš„ `Parallels Tools` ä¿®æ”¹ç‰ˆæœ¬ï¼Œç›¸å…³è¿è¡Œç¯å¢ƒå¦‚ä¸‹ï¼š

| **åºå·** | **è®¾å¤‡/è½¯ä»¶**         | **ç‰ˆæœ¬**               | **å¤‡æ³¨**                                    |
|:------:|:-----------------:|:--------------------:|:-----------------------------------------:|
| 1      | Mac mini 2023     | Apple M2             | macOS Sonoma 14.3.1 (23D60)               |
| 2      | Parallels Desktop | 19.1.0 (54729)       | Parallels Tools  v19.1.0.54729            |
| 3      | Arch Linux ARM    | 6.7.6-1-aarch64-ARCH | [IMAGE](https://archboot.com/iso/aarch64/) |
| 4      | openSUSE Tumbleweed ARM  | 6.7.7-1-default | [IMAGE](https://download.opensuse.org/tumbleweed/iso/) |
| 5      | Fedora 39 ARM     | 6.7.9-200.fc39.aarch64 | [IMAGE](https://fedoraproject.org/workstation/download) |

- â—ï¸ps: ç»æµ‹è¯•ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰ `6.7.X` ç‰ˆæœ¬çš„å†…æ ¸éƒ½é€‚ç”¨ã€‚

![About Parallels Desktop](https://img2.covear.top/2024-02-29-20240229215707.png "About Parallels Desktop")
<p style="text-align: center;color: gray;">Parallels Desktop è½¯ä»¶ä¿¡æ¯</p>

---

## ä¸ºä»€ä¹ˆè¦åœ¨è™šæ‹Ÿæœºä¸­å®‰è£… `Parallels Tools` ï¼Ÿ
åœ¨è™šæ‹Ÿæœºå†…éƒ¨è™½ç„¶ä¸å®‰è£… Parallels Tools ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ç³»ç»Ÿï¼Œä½†æ˜¯å®‰è£…åèƒ½å¤Ÿæ˜¾è‘—æ”¹å–„è™šæ‹Ÿæœºçš„æ“ä½œæ•ˆç‡ã€å¢å¼ºåŠŸèƒ½å…¼å®¹æ€§å’Œæé«˜æ•´ä½“ç”¨æˆ·ä½“éªŒï¼Œç¡®ä¿è™šæ‹Ÿæœºç¯å¢ƒæ›´åŠ è´´è¿‘çœŸå®çš„ç¡¬ä»¶ç¯å¢ƒï¼Œå¤§æ¦‚ä¼šæœ‰ä»¥ä¸‹æ–¹é¢çš„åŠŸèƒ½ä¼˜åŒ–ã€‚
- æ˜¾ç¤ºä¼˜åŒ–ï¼š
  - è‡ªåŠ¨è°ƒæ•´åˆ†è¾¨ç‡é€‚åº”å®¿ä¸»æœºçª—å£å¤§å°æˆ–å®ç°å…¨å±æ¨¡å¼ä¸‹çš„æ— ç¼åˆ‡æ¢ã€‚
  - æ”¯æŒé€æ˜åº¦æ•ˆæœå’Œå…¶ä»–å›¾å½¢åŠ é€ŸåŠŸèƒ½ã€‚
- è¾“å…¥è®¾å¤‡æ”¯æŒï¼š
  - ä¼˜åŒ–é¼ æ ‡æŒ‡é’ˆåœ¨å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´ç§»åŠ¨çš„æ— ç¼ä½“éªŒï¼Œæ¶ˆé™¤é¼ æ ‡æ•æ‰ç­‰é—®é¢˜ã€‚
  - æä¾›æ›´å¥½çš„é”®ç›˜å“åº”ï¼ŒåŒ…æ‹¬ç‰¹æ®Šé”®çš„æ”¯æŒã€‚
- æ–‡ä»¶å…±äº«ï¼š
  - å…è®¸è™šæ‹Ÿæœºä¸å®¿ä¸»æœºä¹‹é—´çš„æ–‡ä»¶å…±äº«ï¼Œæ–¹ä¾¿æ•°æ®äº¤æ¢ã€‚
- å‰ªè´´æ¿å…±äº«ï¼š
  - å®ç°å®¿ä¸»æœºä¸è™šæ‹Ÿæœºä¹‹é—´çš„æ–‡æœ¬ã€å›¾ç‰‡å’Œå…¶ä»–å†…å®¹çš„å¤åˆ¶ç²˜è´´åŠŸèƒ½ã€‚
- ç½‘ç»œä¼˜åŒ–ï¼š
  - æ”¹å–„è™šæ‹Ÿç½‘ç»œé€‚é…å™¨æ€§èƒ½ï¼Œä½¿ç½‘ç»œé€šä¿¡æ›´ä¸ºæµç•…ã€‚
- åŒæ­¥æ—¶é—´ï¼š
  - ä¿æŒå®¿ä¸»æœºä¸è™šæ‹Ÿæœºç³»ç»Ÿæ—¶é—´çš„ä¸€è‡´æ€§ã€‚
- éŸ³é¢‘æ”¯æŒï¼š
  - æä¾›é«˜è´¨é‡çš„éŸ³é¢‘é‡å®šå‘ï¼Œè®©è™šæ‹Ÿæœºä¸­çš„å£°éŸ³èƒ½å¤Ÿæ­£å¸¸æ’­æ”¾åˆ°å®¿ä¸»æœºçš„æ‰¬å£°å™¨ã€‚
- æ‰“å°æœåŠ¡ï¼š
  - è®©è™šæ‹Ÿæœºèƒ½å¤Ÿè®¿é—®å’Œä½¿ç”¨å®¿ä¸»æœºçš„æ‰“å°æœºèµ„æºã€‚
- å¿«ç…§å’Œæ¢å¤åŠŸèƒ½ï¼š
  - ååŠ© Parallels Desktop è½¯ä»¶å®ç°æ›´é«˜æ•ˆçš„è™šæ‹Ÿæœºå¿«ç…§å’Œæ¢å¤æœºåˆ¶ã€‚_(è¿™å¯¹äº `ArchLinux` æ¥è¯´å¾ˆæœ‰ç”¨)_

---

## ä¸ºä»€ä¹ˆè¦ä¿®æ”¹å®˜æ–¹æä¾›çš„ `Parallels Tools` ï¼Ÿ
è¿è¡Œç¯å¢ƒå¦‚å¼€å¤´æ‰€ä»‹ç»ï¼Œåœ¨ `Arch Linux ARM` è™šæ‹Ÿæœºä¸­æŒ‰ç…§å®˜æ–¹è¯´æ˜å®‰è£…æ—¶ï¼Œæç¤ºæœ‰ä»¥ä¸‹é”™è¯¯éœ€è¦è§£å†³ï¼š

---

- [ ] **~~æŒ‚è½½çš„é•œåƒæ— æ³•ç›´æ¥å®‰è£…ï¼Œæƒé™ä¸è¶³ã€‚~~**
	- ### åŸç”Ÿé”™è¯¯1ï¼š
  > - exec: ./installer/installer.aarch64: cannot execute: Permission denied
  ![2024-03-03-20240303004357](https://img2.covear.top/2024-03-03-20240303004357.png "2024-03-03-20240303004357")

  åœ¨æŒ‚è½½çš„é•œåƒä¸­ç›´æ¥è¿è¡Œ `install` è„šæœ¬æœ‰æ”¶åˆ°è¿™ä¸ªé”™è¯¯æç¤ºï¼Œå°è¯• `sudo` è¿è¡Œå’Œåˆ‡æ¢åˆ° root ç”¨æˆ·éƒ½æ— æ³•æ­£å¸¸å®‰è£…ï¼Œå®æµ‹æœ€ç®€å•çš„è§£å†³åŠæ³•ï¼šæŠŠæŒ‚è½½çš„å…‰é©±ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½æ‹·è´å‡ºæ¥ï¼Œç„¶ååœ¨æœ¬åœ°æ–‡ä»¶å¤¹ä¸­è¿è¡Œå®‰è£… `sudo ./install`ï¼Œå¦‚æœè¿˜æ˜¯å‡ºç°ç±»ä¼¼çš„æƒé™æç¤ºï¼Œå°è¯•åœ¨æ–‡ä»¶å¤¹ä¸­è¿è¡Œ `chmod 777 ./ -R` æ¥å°†æ–‡ä»¶è¯»å†™æƒé™æ”¾å¼€ã€‚

---

- [x] **éƒ¨åˆ†ä¾èµ–æœªå®‰è£…ï¼Œå¹¶ä¸”å·¥å…·æ— æ³•è‡ªåŠ¨å®‰è£…ã€‚**
  - ### åŸç”Ÿé”™è¯¯2ï¼š
  > - Error: An error occurred while installing the following packages: linux67-headers=6.7.6-1 make dkms 
  ![2024-03-03-20240303033533](https://img2.covear.top/2024-03-03-20240303033533.png "2024-03-03-20240303033533")

	ç¬¬ä¸€æ¬¡è¿è¡Œè¿è¡Œå·¥å…·ä¸­çš„ `install` è„šæœ¬æ—¶ï¼Œæç¤ºç¼ºå°‘ä»¥ä¸Šä¾èµ–ï¼Œå°è¯•å·¥å…·æ— æ³•è‡ªåŠ¨å®‰è£…ï¼Œåº”è¯¥æ˜¯å·¥å…·å¯¹ `Arch Linux` çš„ `pacman` åŒ…ç®¡ç†å·¥å…·æ²¡æœ‰é€‚é…å¥½ï¼Œä¿®æ”¹äº† [`install`](./install) è„šæœ¬ï¼Œåœ¨ç¬¬43è¡Œä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š
  ```shell
  [[ "$(uname -r)" == *"ARCH"* ]] && sudo pacman -S linux-aarch64-headers make dkms --noconfirm
  ```
  å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­æ‰‹åŠ¨å®‰è£…å®ƒä»¬ã€‚
	```shell
	sudo pacman -S linux-aarch64-headers make dkms --noconfirm
	```
---

- [x] **å·¥å…·æ— æ³•æ­£å¸¸ç¼–è¯‘ã€‚**
	- ### åŸç”Ÿé”™è¯¯3ï¼š
  > - modprobe: FATAL: Module prl_tg not found in directory /lib/modules/6.7.6-1-aarch64-ARCH
  ![2024-03-03-20240303035709](https://img2.covear.top/2024-03-03-20240303035709.png "2024-03-03-20240303035709")

  ä»æ—¥å¿—ä¸­æŸ¥è¯¢åˆ°äº†é”™è¯¯æç¤ºå°±å¾ˆå¥½è§£å†³äº†ï¼Œæµè§ˆå®‰è£…è„šæœ¬ï¼Œé”™è¯¯çš„æºç æ¥è‡ª [`kmods/prl_mod.tar.gz`](./kmods/prl_mod.tar.gz) ï¼Œè§£å‹ä¿®æ”¹å…¶ä¸­ `prl_fs/SharedFolders/Guest/Linux/prl_fs/inode.c` æºç ï¼ŒæŠŠ `i_atime` æ›¿æ¢ä¸º `__i_atime` ï¼ŒæŠŠ `i_mtime` æ›¿æ¢ä¸º `__i_mtime` ï¼Œè¿™é‡Œæ€»å…±6å¤„ä¿®æ”¹ï¼Œé‡æ–°æ‰“åŒ…å³å¯ã€‚
  å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿è¡Œä»¥ä¸‹ shell è„šæœ¬å®Œæˆä¿®æ”¹ã€‚
  ```shell
  #!/bin/bash

  mkdir -p ./kmods/prl_mod/
  tar -xzvf ./kmods/prl_mod.tar.gz -C ./kmods/prl_mod/
  mv ./kmods/prl_mod.tar.gz ./kmods/prl_mod.tar.gz.bak

  sed -i 's/i_atime/__i_atime/g' ./kmods/prl_mod/prl_fs/SharedFolders/Guest/Linux/prl_fs/inode.c
  sed -i 's/i_mtime/__i_mtime/g' ./kmods/prl_mod/prl_fs/SharedFolders/Guest/Linux/prl_fs/inode.c

  tar -czvf ./kmods/prl_mod.tar.gz ./kmods/prl_mod/*
  rm -rf ./kmods/prl_mod

  echo "All operations completed."
  ```

---

## å¦‚ä½•ä½¿ç”¨æˆ‘ä¿®æ”¹å¥½çš„ `Parallels Tools`ï¼Ÿ
æœ¬æ–‡æä¾›ä¸¤ç§ä¸»è¦æ–¹æ³•å¿«æ·ä½¿ç”¨æˆ‘ä¿®æ”¹å¥½çš„å·¥å…·åŒ…ã€‚

  - ### ä½¿ç”¨æ–¹æ³•1ï¼š
    - [x] è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºè™šæ‹Ÿæœºæ— æ³•è¿æ¥ç½‘ç»œçš„æƒ…å†µï¼Œå¯ä»¥ç¦»çº¿å®Œæˆå®‰è£…ã€‚
    - 1ï¸âƒ£ åœ¨æœ¬ä»“åº“çš„ [Releases](https://github.com/DavidDengHui/prl-tools-archlinux-arm/releases) ä¸­æŸ¥çœ‹ä¸‹è½½æ‰“åŒ…å¥½çš„ `.iso` é•œåƒæ–‡ä»¶ã€‚ï¼ˆâ—ï¸æ³¨ï¼šä¸­å›½å¤§é™†åœ°åŒºå¯ä»¥æŸ¥çœ‹ä½äº [Gitee](https://gitee.com/DavidDengHui/prl-tools-archlinux-arm/releases) å¤‡ä»½çš„ä»“åº“é•œåƒï¼‰
    - 2ï¸âƒ£ åœ¨ Parallels Desktop è½¯ä»¶èœå•æ  "`è®¾å¤‡`" â†’ "`CD/DVD`" â†’ "`è¿æ¥é•œåƒ`"ï¼Œé€‰æ‹©æ‰“å¼€ä¸‹è½½å¥½çš„ `prl-tools-archlinux-arm.iso` é•œåƒæ–‡ä»¶ã€‚
    - 3ï¸âƒ£ åœ¨è™šæ‹Ÿæœºä¸­æŒ‚è½½é•œåƒï¼ˆæŒ‚è½½åçš„é•œåƒæ ‡ç­¾åæ˜¯ _`Parallels Tools for ALA`_ï¼‰ï¼Œåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œé•œåƒæ ¹ç›®å½•ä¸­çš„å®‰è£…è„šæœ¬ `sudo ./install`ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…å³å¯ã€‚

  - ### ä½¿ç”¨æ–¹æ³•2ï¼š
    - [ ] è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºè™šæ‹Ÿæœºå¯ä»¥æ­£å¸¸ä¸Šç½‘ï¼Œåœ¨è™šæ‹Ÿæœºä¸­ç›´æ¥å®Œæˆå®‰è£…ã€‚
    - 1ï¸âƒ£ åœ¨è™šæ‹Ÿæœºä¸­å®Œæ•´å…‹éš†æœ¬ä»“åº“ 
      ```shell
      git clone https://github.com/DavidDengHui/prl-tools-archlinux-arm.git
      # Mirror of CHN: https://gitee.com/DavidDengHui/prl-tools-archlinux-arm.git
      ```
    - 2ï¸âƒ£ è™šæ‹Ÿæœºç»ˆç«¯ä¸­ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œä»“åº“æ ¹ç›®å½•ä¸­çš„å®‰è£…è„šæœ¬ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…å³å¯ã€‚
      ```shell
      sudo ./prl-tools-archlinux-arm/install
      ```

---

## ä¿®æ”¹ç‰ˆ `Parallels Tools` å·¥å…·åŒ…å®‰è£…è¿‡ç¨‹å±•ç¤ºã€‚

![2024-03-03-20240303030255](https://img2.covear.top/2024-03-03-20240303030255.png "2024-03-03-20240303030255")

![2024-03-03-20240303050549](https://img2.covear.top/2024-03-03-20240303050549.png "2024-03-03-20240303050549")

![2024-03-03-20240303033433](https://img2.covear.top/2024-03-03-20240303033433.png "2024-03-03-20240303033433")

![2024-03-03-20240303033457](https://img2.covear.top/2024-03-03-20240303033457.png "2024-03-03-20240303033457")

![2024-03-03-20240303034409](https://img2.covear.top/2024-03-03-20240303034409.png "2024-03-03-20240303034409")

![2024-03-03-20240303050703](https://img2.covear.top/2024-03-03-20240303050703.png "2024-03-03-20240303050703")

---

ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰
:wink: :smile: Good luckï½ :-) ;)